# 股票池筛选与回测框架开发日志

## 版本历史与更新记录

本日志文件记录框架的开发过程、功能更新和运行结果，便于版本管理和后期维护。

---

# v0.1.0 (2025-03-07)

## 项目概述

本项目是一个基于Python的股票池筛选与回测框架，旨在通过技术指标（KDJ）选择符合特定条件的股票并进行回测分析。

### 功能特点

- **配置管理**：使用YAML文件存储和管理配置信息，包括股票池、指标参数等
- **数据获取**：自动从Tushare API获取股票日线数据并保存到本地
- **选股策略**：基于KDJ指标J值的选股策略，J值低于特定阈值（默认为0）视为买入信号
- **交易逻辑**：买入条件为J值低于0，卖出条件为J值首次超过70
- **回测系统**：支持等权重和市值加权两种资金分配方式
- **性能评估**：计算收益率、最大回撤等关键指标衡量策略性能

### 项目结构

```
项目目录
├── config.yaml                # 配置文件
├── requirements.txt           # 依赖列表
├── dataset/
│   └── stocktrading/         # 股票数据存储文件夹
├── src/
│   ├── main.py               # 主程序入口
│   ├── config_manager.py     # 配置管理模块
│   ├── data_fetcher.py       # 数据获取模块
│   ├── stock_selector.py     # 选股策略模块
│   └── backtest.py           # 回测模块
└── development_log.md        # 开发日志（本文件）
```

## 初始开发

### 框架搭建

- 实现了基本的配置管理模块，使用YAML文件存储配置信息
- 编写了数据获取模块，连接Tushare API获取股票数据并保存到本地
- 实现了KDJ选股策略，计算指标并根据指标值生成买入/卖出信号
- 开发了回测模块，支持等权重和市值加权两种资金分配方式
- 创建了主程序，整合各个模块功能，提供统一入口

### 关键算法

- KDJ指标计算：使用移动窗口计算KDJ指标，初始K和D值设为50
- 买入信号：J值低于0时产生
- 卖出信号：J值首次超过70时产生
- 回测逻辑：先卖出后买入，考虑交易成本和滑点

### 运行结果

*尚未执行首次回测，待运行后补充*

---

# v0.1.1 (2025-03-07)

## 优化计算方法

### KDJ计算逻辑优化

- 修改KDJ计算方法，改用加权计算替代简单移动平均
- 设置K和D的初始值为50
- 调整代码处理日期降序排列的数据，确保指标计算的准确性

## 配置调整

### Token配置优化

- 将Tushare API Token移至配置文件中
- 修改配置管理器，添加读取Token的方法
- 调整主程序逻辑，优先从配置文件读取Token，配置文件中无有效Token时才请求用户输入

## 进度可视化

### 增加进度条显示

- 添加tqdm依赖支持进度条显示
- 在数据更新过程中增加进度条，显示更新进度
- 在选股过程中增加进度条，显示KDJ计算和信号筛选进度
- 在回测过程中增加进度条，直观展示回测进度和预估完成时间

### 运行结果

*待回测完成后补充*

---

**注意事项**：
1. 每次修改代码后，请更新本日志，简要说明改动内容和逻辑
2. 每次成功运行回测后，请记录回测结果
3. 重大功能更新或架构调整时，创建新的版本（一级标题）
4. 同一版本内的不同修改用二级标题区分 